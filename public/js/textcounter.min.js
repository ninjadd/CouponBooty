/*!
* jQuery Text Counter Plugin v0.6.3
* https://github.com/ractoon/jQuery-Text-Counter
*
* Copyright 2014 ractoon
* Released under the MIT license
*/
!function(a){a.textcounter=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("textcounter",d),d.init=function(){d.options=a.extend({},a.textcounter.defaultOptions,c);var b=d.options.countDown?d.options.countDownText:d.options.counterText,e=d.options.countDown?d.options.max:0,f=a("<div/>").html(b.replace("%d",'<span class="'+d.options.textCountClass+'">'+e+"</span>")).contents();d.$container=a("<"+d.options.countContainerElement+"/>").addClass(d.options.countContainerClass).append(f),d.$text_counter=d.$container.find("span"),d.$el.after(d.$container),d.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",d.checkLimits).trigger("click.textcounter"),d.options.init(d.el)},d.checkLimits=function(b){var c=d.$el,f=(d.$container,c.val()),g=0,h=0,i=void 0!==b.originalEvent;if(a.isEmptyObject(f)||(g=d.textCount(f)),"auto"==d.options.max){var j=d.$el.attr("maxlength");void 0!==j&&!1!==j?d.options.max=j:d.$container.text("error: [maxlength] attribute not set")}if(h=d.options.countDown?d.options.max-g:g,d.setCount(h),d.options.min>0&&i&&(g<d.options.min?(d.setErrors("min"),d.options.minunder(d.el)):g>=d.options.min&&(d.options.mincount(d.el),d.clearErrors("min"))),-1!==d.options.max)if(g>=d.options.max&&0!==d.options.max)if(d.options.maxcount(d.el),d.options.stopInputAtMaximum){var k="";if("word"==d.options.type)for(var l=f.split(/[^\S\n]/g),m=0;m<l.length&&!(m>=d.options.max);)void 0!==l[m]&&(k+=l[m]+" ",m++);else{var n=d.options.twoCharCarriageReturn?d.options.max-d.twoCharCarriageReturnCount(f):d.options.max;if(d.options.countSpaces)k=f.substring(0,n);else for(var o=f.split(""),p=o.length,q=0,m=0;q<n&&m<p;)" "!==o[m]&&q++,k+=o[m++]}c.val(k.trim()),g=d.textCount(c.val()),h=d.options.countDown?d.options.max-g:g,d.setCount(h)}else d.setErrors("max");else d.options.maxunder(d.el),d.clearErrors("max")},d.textCount=function(a){return"word"==d.options.type?d.wordCount(a):d.characterCount(a)},d.wordCount=function(a){return a.trim().replace(/\s+/gi," ").split(" ").length},d.characterCount=function(a){var b=0,c=0;if(d.options.twoCharCarriageReturn&&(c=d.twoCharCarriageReturnCount(a)),b=d.options.countSpaces?a.replace(/[^\S\n|\r|\r\n]/g," ").length:a.replace(/\s/g,"").length,d.options.countExtendedCharacters){var e=a.match(/[^\x00-\xff]/gi);b=null==e?a.length:a.length+e.length}return d.options.twoCharCarriageReturn&&(b+=c),b},d.twoCharCarriageReturnCount=function(a){var b=a.match(/(\r\n|\n|\r)/g),c=0;return null!==b&&(c=b.length),c},d.setCount=function(a){d.$text_counter.text(a)},d.setErrors=function(a){var b=d.$el,c=d.$container,e="";if(b.addClass(d.options.inputErrorClass),c.addClass(d.options.counterErrorClass),d.options.displayErrorText){switch(a){case"min":e=d.options.minimumErrorText;break;case"max":e=d.options.maximumErrorText}c.children(".error-text-"+a).length||c.append("<"+d.options.errorTextElement+' class="error-text error-text-'+a+'">'+e+"</"+d.options.errorTextElement+">")}},d.clearErrors=function(a){var b=d.$el,c=d.$container;c.children(".error-text-"+a).remove(),0==c.children(".error-text").length&&(b.removeClass(d.options.inputErrorClass),c.removeClass(d.options.counterErrorClass))},d.init()},a.textcounter.defaultOptions={type:"character",min:0,max:200,countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"Total Count: %d",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: %d",countExtendedCharacters:!1,twoCharCarriageReturn:!1,maxunder:function(a){},minunder:function(a){},maxcount:function(a){},mincount:function(a){},init:function(a){}},a.fn.textcounter=function(b){return this.each(function(){new a.textcounter(this,b)})}}(jQuery);